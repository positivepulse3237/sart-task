<!DOCTYPE html>
<html>
<head>
    <title>Admin Panel</title>
    <style>
        body { font-family: sans-serif; padding: 20px; max-width: 800px; margin: 0 auto; }
        textarea { width: 100%; height: 300px; margin-top: 10px; }
        .hidden { display: none; }
    </style>
</head>
<body>
    <h1>Experiment Admin</h1>
    
    <div id="loginSection">
        <input type="password" id="pass" placeholder="Enter Password">
        <button onclick="login()">Login</button>
    </div>

    <div id="dataSection" class="hidden">
        <button onclick="downloadCSV()">Download as CSV</button>
        <h3>Current Data in data.txt:</h3>
        <textarea id="displayArea" readonly>Loading...</textarea>
    </div>

    <script>
        let rawData = "";

        async function login() {
            const p = document.getElementById('pass').value;
            // CHANGE PASSWORD HERE
            if(p !== "admin123") {
                alert("Wrong password");
                return;
            }

            document.getElementById('loginSection').classList.add('hidden');
            document.getElementById('dataSection').classList.remove('hidden');

            // FETCH RAW DATA DIRECTLY FROM GITHUB
            const url = 'https://raw.githubusercontent.com/positivepulse3237/sart-task/main/data.txt';
            
            try {
                const res = await fetch(url);
                rawData = await res.text();
                document.getElementById('displayArea').value = rawData;
            } catch (e) {
                document.getElementById('displayArea').value = "Error loading file. Make sure data.txt exists.";
            }
        }

        function downloadCSV() {
            const blob = new Blob([rawData], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = "experiment_data.csv";
            a.click();
        }
    </script>
</body>
</html>
